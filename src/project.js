require=function s(c,a,r){function h(e,t){if(!a[e]){if(!c[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(d)return d(e,!0);var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}var o=a[e]={exports:{}};c[e][0].call(o.exports,function(t){return h(c[e][1][t]||t)},o,o.exports,s,c,a,r)}return a[e].exports}for(var d="function"==typeof require&&require,t=0;t<r.length;t++)h(r[t]);return h}({Ball:[function(t,e,i){"use strict";cc._RF.push(e,"05d6195d99B06zz0IIi6csv","Ball");var n=cc.Enum({BEGEN:-1,ENDED:-1,CANCEL:-1}),l=cc.Enum({FLY:-1,DOWN:-1,NONE:-1});cc.Class({extends:cc.Component,properties:{emitSpeed:0,gravity:0,scale:0,showTime:0,maxXSpeed:0},init:function(t){this.game=t,this.registerInput(),this.enableInput(!0),this.showAnim(),this.valid=!1,this.status=n.CANCEL,this.currentHorSpeed=0,this.currentVerSpeed=0,this.target=cc.p(0,0),this.node.setScale(1),this.node.rotation=0,this.hitIn=!1},showAnim:function(){this.node.opacity=0;var t=cc.fadeIn(this.showTime);this.node.runAction(t)},registerInput:function(){this.listener={event:cc.EventListener.TOUCH_ONE_BY_ONE,onTouchBegan:function(t,e){return this.began=t.getLocation(),this.status=n.BEGEN,!0}.bind(this),onTouchEnded:function(t,e){this.ended=t.getLocation(),100<cc.pDistance(this.began,this.ended)&&this.began.y<this.ended.y?(this.status=n.ENDED,this.enableInput(!1),this.currentVerSpeed=this.emitSpeed,this.target=this.node.parent.convertToNodeSpaceAR(this.ended),this.currentHorSpeed=2*this.target.x,this.game.soundMng.playFlySound(),this.doAnim(),this.game.newBall(),this.shadow&&this.shadow.dimiss()):this.status=n.CANCEL}.bind(this),onTouchCancelled:function(t,e){this.status=n.CANCEL}.bind(this)},cc.eventManager.addListener(this.listener,this.node)},enableInput:function(t){t?cc.eventManager.resumeTarget(this.node):cc.eventManager.pauseTarget(this.node)},doAnim:function(){var t=cc.scaleTo(1,this.scale),e=cc.randomMinus1To1(),i=cc.rotateBy(2,1080*e),n=cc.spawn(t,i);this.node.runAction(n)},update:function(t){this.status==n.ENDED&&(this._updatePosition(t),this._checkValid())},_checkValid:function(){if(this.ballStatus===l.DOWN&&!this.valid){var t=this.node.parent;if(null!=t){var e=this.game.basket,i=e.left,n=e.right,o=this.node.getBoundingBoxToWorld().width/2,s=(t.convertToWorldSpaceAR(this.node.getPosition()).x,t.convertToWorldSpaceAR(this.node.getPosition()).x,t.convertToWorldSpaceAR(this.node.getPosition()).x),c=t.convertToWorldSpaceAR(this.node.getPosition()).y,a=t.convertToWorldSpaceAR(e.linePreNode.getPosition()).y-o,r=e.node.convertToWorldSpaceAR(i.getPosition()).x,h=e.node.convertToWorldSpaceAR(n.getPosition()).x,d=e.node.convertToWorldSpaceAR(i.getPosition()).y-2*o;c<a&&d<c&&r<s&&s<h&&(this.valid=!0,this.game.score.addScore(),this.game.basket.playNetAnim(),this.hitIn?this.game.soundMng.playHitBoardInSound():this.game.soundMng.playBallInSound())}}},bindShadow:function(t){this.shadow=t},_updatePosition:function(t){if(this.node.x+=t*this.currentHorSpeed,this.currentVerSpeed-=t*this.gravity,this.node.y+=t*this.currentVerSpeed,this._changeBallStatus(this.currentVerSpeed),this.ballStatus===l.NONE&&this._isOutScreen())return this.node.stopAllActions(),this.node.removeFromParent(),this.valid=!1,void cc.pool.putInPool(this)},_isOutScreen:function(){return this.node.y<-800},_changeBallStatus:function(t){0===t||this._isOutScreen()?this.ballStatus=l.NONE:0<t?(this.ballStatus=l.FLY,this.game.basket.switchMaskLineShow(!1)):(this.ballStatus=l.DOWN,this.game.basket.switchMaskLineShow(!0))},onCollisionEnter:function(t,e){if(this.ballStatus!==l.FLY){var i=t.node.getComponent("CollisionBox"),n=i.getLeft(),o=i.getRight(),s=e.world,c=s.radius,a=this.node.parent.convertToWorldSpaceAR(e.node.getPosition()),r=this.game.basket.node.convertToWorldSpaceAR(t.node.getPosition()),h=(a.y-r.y)/c,d=Math.abs(r.x-a.x)/c,u=this.currentHorSpeed/Math.abs(this.currentHorSpeed)*this.maxXSpeed;("right"===t.node.name&&this.node.x<=n||"left"===t.node.name&&this.node.x>=o)&&(this.hitIn?this.currentHorSpeed=u*d:(this.currentHorSpeed=-1*u*d,this.hitIn=!0)),("right"===t.node.name&&this.node.x>o||"left"===t.node.name&&this.node.x<n)&&(this.currentHorSpeed=u),this.currentVerSpeed=-1*this.currentVerSpeed*h,this.game.soundMng.playHitBoardSound();s.aabb,s.preAabb,s.transform,s.radius,s.position}}}),cc._RF.pop()},{}],Basket:[function(t,e,i){"use strict";cc._RF.push(e,"ac9fdFyp49GVKHUgk9/FVli","Basket"),cc.Class({extends:cc.Component,properties:{line:cc.Node,left:cc.Node,right:cc.Node,linePre:cc.Prefab,count:cc.Label},init:function(t){this.game=t,this._createMaskLine()},startMove:function(){this._doMoveAnim()},stopMove:function(){this.node.stopAllActions(),this._resetPosition()},_resetPosition:function(){this.node.setPositionX(0)},_doMoveAnim:function(){var t=cc.moveBy(3,cc.p(200,0)),e=cc.moveBy(3,cc.p(-200,0)),i=cc.repeatForever(cc.sequence(t,e,e,t));this.node.runAction(i)},update:function(t){this.line;var e=this.node.convertToWorldSpaceAR(this.line.getPosition()),i=this.node.parent.convertToNodeSpaceAR(e);this.linePreNode.setPosition(cc.p(this.node.x,i.y))},_createMaskLine:function(){this.linePreNode=cc.instantiate(this.linePre),this.game.node.addChild(this.linePreNode)},switchMaskLineShow:function(t){t?this.linePreNode.setLocalZOrder(100):this.linePreNode.setLocalZOrder(0)},playNetAnim:function(){if(this.linePreNode){var t=cc.scaleTo(.1,1,1.1),e=cc.scaleTo(.3,1,.9),i=cc.scaleTo(.2,1,1),n=cc.sequence(t,e,i);this.linePreNode.getChildByName("net").runAction(n)}}}),cc._RF.pop()},{}],CollisionBox:[function(t,e,i){"use strict";cc._RF.push(e,"7c4c6Rwi4tIC4UMBgYL4231","CollisionBox"),cc.Class({extends:cc.Component,properties:{},getLeft:function(){return this.node.x-this.node.width/2},getRight:function(){return this.node.x+this.node.width/2},getWorldPoint:function(t){return t.convertToWorldSpaceAR(this.node.getPosition())}}),cc._RF.pop()},{}],GameManager:[function(t,e,i){"use strict";cc._RF.push(e,"7b066H36KxCVr0SNDZka91/","GameManager");var n=t("Basket"),o=t("Ball"),s=t("Shadow"),c=t("Score"),a=t("SoundManager"),r=t("TimeManager");cc.Class({extends:cc.Component,properties:{ball:cc.Prefab,shadow:cc.Prefab,basket:n,startPosition:cc.Vec2,score:c,soundMng:a,timeMng:r,result:cc.Node},onLoad:function(){this.newBall(),this.initCollisionSys(),this.basket.init(this),this.score.init(this),this.timeMng.init(this),this.timeMng.oneSchedule(),this.score.setScore(0)},initCollisionSys:function(){this.collisionManager=cc.director.getCollisionManager(),this.collisionManager.enabled=!0,cc.director.setDisplayStats(!0)},newBall:function(){var t=null;(t=cc.pool.hasObject(o)?cc.pool.getFromPool(o).node:cc.instantiate(this.ball)).setLocalZOrder(1),this.node.addChild(t),t.setPosition(this.startPosition);var e=t.getComponent("Ball");e.init(this),this.newShadow(e)},newShadow:function(t){var e=null;(e=cc.pool.hasObject(s)?cc.pool.getFromPool(s).node:cc.instantiate(this.shadow)).setLocalZOrder(2),this.node.addChild(e),e.setPosition(this.startPosition);var i=e.getComponent("Shadow");t.bindShadow(i),i.init(this)},startMoveBasket:function(){this.basket.startMove()},stopMoveBasket:function(){this.basket.stopMove()},gameOver:function(){this.result.active=!0,this.result.getChildByName("score").getComponent(cc.Label).string=this.score._score,this.score.setScore(0)}}),cc._RF.pop()},{Ball:"Ball",Basket:"Basket",Score:"Score",Shadow:"Shadow",SoundManager:"SoundManager",TimeManager:"TimeManager"}],Line:[function(t,e,i){"use strict";cc._RF.push(e,"00dcby5FcZIh5P10wPcfVGt","Line"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){}}),cc._RF.pop()},{}],Score:[function(t,e,i){"use strict";cc._RF.push(e,"0dbad8nuMBK8L4YWla50RjT","Score"),cc.Class({extends:cc.Component,properties:{scoreText:cc.Label},init:function(t){this.game=t,this._score=0},getScore:function(){return _score},setScore:function(t){this._score=t,this._updateScore()},addScore:function(){this._score+=1,this._updateScore()},_updateScore:function(){this.scoreText.string=this._score}}),cc._RF.pop()},{}],Shadow:[function(t,e,i){"use strict";cc._RF.push(e,"403b5GGRt5LYYNN87LqlnM7","Shadow"),cc.Class({extends:cc.Component,properties:{showTime:0,shadow2:cc.Node},init:function(t){this.node.setScale(1),this._showAnim()},_showAnim:function(){this.node.opacity=0,this.shadow2.active=!0;var t=cc.fadeIn(this.showTime);this.node.runAction(t)},dimiss:function(){this._dismissAnim()},_dismissAnim:function(){this.shadow2.active=!1;var t=cc.fadeOut(this.showTime),e=cc.scaleTo(this.showTime,.5),i=cc.spawn(t,e),n=cc.callFunc(this._callBack.bind(this));this.node.runAction(cc.sequence(i,n))},_callBack:function(){this.node.stopAllActions(),this.node.removeFromParent(),cc.pool.putInPool(this)}}),cc._RF.pop()},{}],SoundManager:[function(t,e,i){"use strict";cc._RF.push(e,"3495eBx+i1PlrOKcbTaqUD6","SoundManager"),cc.Class({extends:cc.Component,properties:{toggleAudio:!0,scoreAudio:{default:null,url:cc.AudioClip},ballInAudio:{default:null,url:cc.AudioClip},hitBoardInAudio:{default:null,url:cc.AudioClip},hitBoardAudio:{default:null,url:cc.AudioClip},flyAudio:{default:null,url:cc.AudioClip}},init:function(t){},playScoreSound:function(){this.playSound(this.scoreAudio)},playBallInSound:function(){this.playSound(this.ballInAudio)},playHitBoardSound:function(){this.playSound(this.hitBoardAudio)},playHitBoardInSound:function(){this.playSound(this.hitBoardInAudio)},playFlySound:function(){this.playSound(this.flyAudio)},playSound:function(t){this.toggleAudio&&cc.audioEngine.playEffect(t,!1)}}),cc._RF.pop()},{}],TimeManager:[function(t,e,i){"use strict";cc._RF.push(e,"f81cdY3hlNAza/JwLtsWk2O","TimeManager"),cc.Class({extends:cc.Component,properties:{maxTime:0,timeToMove:0},init:function(t){this.game=t,this.time=this.maxTime,this.isTimeToMove=!1},_callback:function(){this.counting=!1,this.game.basket.count.string="00  00",this.game.stopMoveBasket(),this.game.gameOver()},stopCounting:function(){this.unschedule(this._callback),this.time=this.maxTime},oneSchedule:function(){this.stopCounting(),this.scheduleOnce(this._callback,this.maxTime),this.counting=!0},update:function(t){if(this.counting&&0<this.time){this.time-=t,this.maxTime-this.timeToMove>=this.time&&!this.isTimeToMove&&(this.isTimeToMove=!0,this.game.startMoveBasket());var e=this.time.toFixed(2);4===e.length&&(e="0"+e),this.game.basket.count.string=e.replace(".","  ")}}}),cc._RF.pop()},{}],result:[function(t,e,i){"use strict";cc._RF.push(e,"57402eTT8ROwYl+6j0zWCnH","result"),cc.Class({extends:cc.Component,properties:{},start:function(){},play_again:function(){cc.director.loadScene("Game")},back_home:function(){cc.director.loadScene("start")},reward:function(){cc.find("Canvas/rewardBox").active=!0}}),cc._RF.pop()},{}],reward:[function(t,e,i){"use strict";cc._RF.push(e,"29c58cEwx1M17gjJJg/Bofd","reward"),cc.Class({extends:cc.Component,properties:{circle:cc.Node,ts:cc.Node},start:function(){},circle_go:function(){var t=cc.rotateTo(10,1700).easing(cc.easeBackOut()),e=cc.callFunc(function(){this.ts.active=!0,console.log("恭喜中奖了，联系客服微信领取")}.bind(this)),i=cc.sequence([t,e]);this.circle.runAction(i)}}),cc._RF.pop()},{}],start:[function(t,e,i){"use strict";cc._RF.push(e,"b50b5/rBzxO9IN9kPNXVhUk","start"),cc.Class({extends:cc.Component,properties:{},start:function(){},start_game:function(){cc.director.loadScene("Game")}}),cc._RF.pop()},{}]},{},["Ball","Basket","CollisionBox","GameManager","Line","Score","Shadow","SoundManager","TimeManager","result","reward","start"]);